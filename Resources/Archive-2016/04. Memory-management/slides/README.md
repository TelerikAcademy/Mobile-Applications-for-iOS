<!-- section start -->
<!-- attr: { class:'slide-title', hasScriptWrapper:true } -->
# Memory Management in Cocoa and Cocoa Touch
##  MRC and ARC

<div class="signature">
  <p class="signature-course">Mobile Applications for iPhone and iPad</p>
  <p class="signature-initiative">Telerik Software Academy</p>
  <a href="http://academy.telerik.com" class="signature-link">http://academy.telerik.com</a>
</div>

# Table of Contents

- Ways of Memory Management in Obj-C
  - Garbage Collection (deprecated)
  - Manual Reference Counting (MRC)
  - Automatic Reference Counting (ARC)
<!-- attr: {showInPresentation: true} --><!-- # Memory Management Overview##  What is Memory Management? --><!-- attr: {hasScriptWrapper: true} --># Memory Management Overview- Memory management is the process of managing computer memory  - Unused objects are removed from memory    - Or are deallocated  - Used objects are kept in memory to prevent error to too-early-deallocated objects  - This should be done efficiently, since allocating/deallocating memory is costly process<!-- attr: {showInPresentation: true} --><!-- # Ways of Memory Management##  In Cocoa and Cocoa Touch --># Ways of Memory Management- The Foundation and Cocoa frameworks support the following for memory management  - Garbage Collection    - The system automatically decides whether an object should be kept or removed from memory    - **Deprecated**  - Manual Reference Counting    - The developer manually states if an object should be kept or removed from memory  - Automatic Memory Management    - The developer marks the objects to be kept    - **Preffered**<!-- attr: {showInPresentation: true} --><!-- #   Garbage Collection##  The easy and slow way -->#   Garbage Collection- Memory management is a form of automatic memory management  - The garbage collector iterates over the memory from time to time and reclaims blocks of memory, that are no longer used by the program    - Used in Java and .NET platforms      - Java Virtual Machine (JVM)      - Common Language Runtime (CLR)    - Deprecated in MAC OS X#   Reference Counting#   Manual and Automatic# Reference Counting- Reference counting is the technique of storing the count of references of an object  - While the count is positive (1 or more), the object is kept in memory  - If the count becomes 0, the object is deallocated from memory- The Cocoa Framework support two types of Reference Counting  - **Manual Reference Counting**  - **Automatic Reference Counting**# Manual Reference Counting- In MRC the developer should keep the count of needed objects positive  - And set the count to 0, when an object is no longer used  - Done by sending `release` or `retain` messages to the object in use    - `retain` increments the count by 1    - `release` decrements the count by 1  - When the count becomes equal to 0, a `dealloc` message is sent to the object# Manulat Reference Counting- _Example:_ allocate and deallocate an object  - Superhero implementation:  ```objectivec  @interface Superhero  //â€¦  -(NSString *)usePower:(NSString *)power {    if(![self.powers containsObject:power]){        return [NSString stringWithFormat:@"%@ cannot use %@", self.name, power];    }    return [NSString stringWithFormat:@"%@ is using %@", self.name, power];  }  //..  @end  ```  - Using a `Superhero` object:  ```objectivec  int main() {    Superhero *supergirl = [[[Superhero alloc] initWithName: @"Supergirl"                                                  andPowers: @"Super strength", @"Flying", nil]]                            retain];    NSLog(@"%@", [supergirl usePower: @"Flying"]);    [supergirl release];    return 0;  }  ```# Manual Reference Counting##  [Demo](http://)# Automatic Reference Counting##  Like MRC, but easier# Automatic Reference Counting- ARC uses only two ways to control the memory:  - `strong` (default)    - Keep a reference to the object    - Take ownership of the object  - `weak`    - Keep a reference to the object    - Does not take ownership of the object# Automatic Reference Counting##  [Demo](http://)<!-- section start --><!-- attr: { class:'slide-section', hasScriptWrapper:true, showInPresentation:true } --># Memory Management in Cocoa## Questions